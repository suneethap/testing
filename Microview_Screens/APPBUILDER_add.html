<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="">

		<title>Micro View</title>
				
		<link rel="stylesheet" href="css/bootstrap.min.css">		
		<link rel="stylesheet" type="text/css" href="css/base.css" />  
		<link rel="stylesheet" type="text/css" href="css/apps.css" />
		<link rel="stylesheet" href="css/font-awesome.css">	
			
		<style>
		 .modele {
			display:none;
		}
		
		</style>
		
	</head>
	<body>
	<div class="container">
	  <div class="page-width">
		<div class="grid main">
		  <div class="grid-tile">
			<div id="appbuilder">
			  <form>
				<ul class="appbuilder-container collapsable-container">
		          <li>
					<div class="header">
						<span class="heading">Application Builder</span>
					</div>      
				  </li>
				  <li>
					<div class="header">
					<input type="text" class="form-control" placeholder="Name of the App" />
					</div>      
				  </li>
				  <li class="appbuilder-section-build open">										  
					<div class="main">	
					  <div class="g70">
						<div class="droparea">
						  <div id="droppedFields" class="droparea-inner">
							<ul class="droparea-fields">
							  <li class="placeholder">Add your items here</li>										  
							</ul>
						  </div>
						</div>
					  </div>	
					  <div class="g25">
						<div class="building-blocks">
						  <div class="building-blocks-title" style="color: blue;">
							<span>Drag blocks to the right to build your app.</span>
					      </div>	
						  <div class="selectorField">
							<ul>
							  <li class="a1"><span class="fa fa-font fa-sm">&nbsp;Text</span>							 				  	
							  <div id="Text" class="modele">
								<div class="header">
								<div class="widget">
									<div class="widget-title">				
									  <div class="remove">
									  <a href="#" style="color:#000000;" title="Remove"><div class="fa fa-times"></div></a>
									  </div>
									  <div class="iconwrapper">
										<span class="tools">
										  <a href="javascript:;" class="fa fa-angle-up fa-lg"></a>
										</span>	
									  </div>													  
									  <div class="iconwrapper"><div class="fa fa-font"></div>
									  </div>
									  <input type="text" placeholder="Text">					  	
									</div><br/>
									<div class="widget-body">	
									  <div class="image-block">
										<div class="img"><label>Type</label></div>
										  <div class="bd">
											<select>
											  <option value="small" selected="selected">Single line of text</option>
											  <option value="large">Large text area</option>
											</select> 
										   </div>
									  </div>							
									  <div class="image-block">
										<div class="img"><label>Explanatory text</label>
										</div>
										<div class="bd">
											<textarea name="textarea" id="txtareaId" placeholder="Explain how people should fill in this field here."></textarea>
										</div>
									  </div>
									  <div class="image-block">
										<div class="img"><label>Required</label></div>
										<div class="bd">
										  <input type="checkbox" name="txtcheckbox" id="checkboxId" value="1" />
										</div>
									  </div>
									</div>
								</div>
								 </div>
							  </div>	
							  </li>
							  <li class="a1"><span class="fa fa-bars fa-sm">&nbsp; Category</span>								 				  	
							  <div id="Category" class="modele">
								<div class="header">
								<div class="widget">
									<div class="widget-title">				
									  <div class="remove">
									  <a href="#" style="color:#000000;" title="Remove"><div class="fa fa-times"></div></a>
									  </div>
									  <div class="iconwrapper">
										<span class="tools">
										  <a href="javascript:;" class="fa fa-angle-up fa-lg"></a>
										</span>	
									  </div>													  
									  <div class="iconwrapper"><div class="fa fa-bars"></div>
									  </div>
									  <input type="text" id="txtcategory" nmae="txtcategory" placeholder="Category">					  	
									</div><br/>
									<div class="widget-body">	
									  <div class="row">
										<div class="col-md-10">
											<input type="text" class="form-control" name="textbox1" id="textbox1" value="" placeholder="Type names for your categories">
										</div>	
										<div class="col-md-2">
											<div id="addButton"><a href="#" class="flatbutton green" title="Add">+</a></div>
										</div>									
									  </div>
									  <div class="TextBoxesGroup"></div>
									  <div class="row">									  
										<div class="col-md-4"><label>Number of possible choices</label></div>
										<div class="col-md-8">
											<div class="col-md-4">
												<input id="option1" name="option1" type="radio" value="">
												<label>One only</label></div>
											<div class="col-md-4">
												<input id="option2" name="option2" type="radio" value="">
												<label>Multiple choice</label></div>
										</div>
									  </div>							
									  <div class="image-block">
										<div class="img"><label>Explanatory text</label></div>
										<div class="bd">
											<textarea placeholder="Explain how people should fill in this field here."></textarea>
										</div>
									  </div>
									  <div class="image-block">
										<div class="img"><label>Required</label></div>
										<div class="bd">
										  <input type="checkbox" name="chkboxctg" id="chkboxctg" value="1" />
										</div>
									  </div>
									</div>
								</div>
								 </div>
							  </div>	
							  </li>
							</ul>									
						  </div>	
						</div>
					  </div>
					</div>
				  </li>				  
				</ul>
			  </form>                 
			</div>
		  </div>
		</div>
	  </div>
	</div>
	
		<script src="js/jquery-1.10.2.js"></script>
		<script src="js/jquery-ui.js"></script>
		<script>
		
			function makeDraggable() {
				$(".selectorField li").draggable({ helper: "clone",stack: "div",cursor: "move", cancel: null  });	
				//$(".widget-body").slideDown(200);
			}
			var draggable = null;
			var newDev = null;
			var _ctrl_index = 0;
			var counter = 1;
				function docReady() {
				console.log("document ready");	
				makeDraggable();				
				$( "#droppedFields ul" ).droppable({
					  hoverClass: "hoverDroppable",
					  drop: function( event, ui ) {					  
						$( this ).find( ".placeholder" ).remove();
						draggable = ui.draggable;	
						draggable = $(ui.draggable).find(".modele").clone();
						draggable.removeClass("modele");	
						draggable.removeClass("selectorField");
						draggable.addClass("droppedFields");
						draggable[0].id = draggable[0].id+(_ctrl_index++); // Attach an ID to the rendered control
						newDev = $( "<li><div id="+draggable[0].id+" class="+draggable[0].id+"></div></li>" ).append(draggable).appendTo(this);
						newDev.find(".widget .widget-body").slideDown("fast");	
						//newDev.removeClass("fa-angle-up").addClass("fa-angle-down");						
					},
					over: function(event, ui) {
						newDev.find(".widget .widget-body").slideUp("fast");							
						//newDev.removeClass("fa-angle-down").addClass("fa-angle-up");
					}
				}).on("click", ".remove", function(event) {
					$(this).parents(".header").remove();
				}).on("click", ".widget .tools .fa-angle-down, .widget .tools .fa-angle-up", function(event) {
					var el = $(this).parents(".widget").children(".widget-body");
					$("li div").find(".widget .widget-body").slideUp("fast");
					if ($(this).hasClass("fa-angle-down")) {
						$(this).removeClass("fa-angle-down").addClass("fa-angle-up");
						el.slideUp(200);
					} else {
						$(this).removeClass("fa-angle-up").addClass("fa-angle-down");
						el.slideDown(200);
					}					
				}).on("click", "#addButton", function(event) {
					var newTextBoxDiv = $(document.createElement('div')).attr("id", 'TextBoxDiv' + counter);
						newTextBoxDiv.html('<br/><div class="row"><div class="col-md-10"><input type="text" class="form-control" name="textbox' + counter +'" id="textbox' + counter + '" value="" ></div><div class="col-md-2"><div id="removeButton"><a href="#" class="flatbutton green" title="Remove">x</a></div></div></div>');
					$("li div").find("#"+draggable[0].id +" .widget .widget-body .TextBoxesGroup").append(newTextBoxDiv);
					//$(this).parents(".widget").children(".widget-body .TextBoxesGroup").append(newTextBoxDiv);
					counter++;
				}).on("click", "#removeButton", function(event) {
					counter--;	
					$(this).parents("#TextBoxDiv" + counter).remove();
				});				
				 	
			}
		</script>
		<script>
		$(document).ready(docReady);
		</script>
	</body>
</html>

